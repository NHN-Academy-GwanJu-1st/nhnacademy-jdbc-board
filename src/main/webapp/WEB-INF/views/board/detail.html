<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h1>NHN Academy JDBC Board Detail</h1>

<div style="display: flex; flex-direction: column; width: 1000px; margin: 0 auto">
     <input type="hidden" name="userName" th:value="${board.userName}" readonly>

    <input type="text" name="title" th:value="${board.title}" readonly>

    <div style="display: flex; align-items: center; font-size: 14px">
        <p style="margin-right: 10px">작성자 : <span th:text="${board.userName}"></span></p>
        <p>작성 시간 : <span th:text="${board.regDate}"></span></p>
    </div>

    <th:block th:if="${board.modifierName != null}">
        <div style="display: flex; align-items: center; font-size: 14px">
        <p style="margin-right: 10px">수정자 : <span th:text="${board.modifierName}"></span></p>
        <p>수정 시간 : <span th:text="${board.updateDate}"></span></p>
        </div>
    </th:block>

    <textarea cols="10" rows="30" name="content" th:text="${board.content}" readonly style="resize: none"></textarea>

    <br>

    <div style="display: flex; align-items: center; justify-content: flex-end">
        <a href="/" style="margin-right: 10px">목록 페이지</a>
        <th:block th:if="${session.user != null}">
            <th:block
                    th:if="${#strings.equals(session.user.role, 'Admin') || #strings.equals(session.user.username, board.userName)}">
                <form method="post" th:action="'/board/delete/' + ${board.id}">
                    <button style="margin-right: 10px">삭제</button>
                </form>
                <a th:href="'/board/modify/'+  ${board.id}">수정</a>
            </th:block>
        </th:block>
    </div>

    <div style="display: flex; align-items: center;">
        <p style="margin-right: 10px">댓글 수</p>
        <p th:text="${commentList.size()}"></p>
    </div>

    <th:block th:if="${session.user != null}">
    <div style="display: flex; align-items: center; margin-bottom: 30px">
        <form method="post" th:action="'/comment/register/' + ${board.id}" style="display: flex; align-items: center">
            <input type="hidden" th:value="${board.id}">
            <input type="hidden" name="userName" th:value="${session.user.username}">
            <textarea cols="120" rows="5" placeholder="댓글을 작성해주세요." name="content" style="resize: none"></textarea>
            <button type="submit" style="height: 85px">등록</button>
        </form>
    </div>
    </th:block>

    <div th:each="comment : ${commentList}" style="border-bottom: 1px solid #444444">
        <div style="font-size: 13px;">
            <th:block th:if="${#strings.equals(comment.modifyCheck, 'Y')}">
                <p>(수정됨)</p>
            </th:block>

            <p th:text="${comment.userName}"></p>
            <p th:text="${#strings.equals(comment.modifyCheck, 'Y')} ? ${comment.updateDate} : ${comment.regDate}" style="margin: 0"></p>
        </div>
        <p th:text="${comment.content}"></p>
    </div>




    <br>
    <br>
    <br>
    <br>

</div>

</body>
</html>